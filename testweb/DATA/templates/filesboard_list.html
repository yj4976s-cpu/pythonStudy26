{% extends 'layout.html' %}
{% block content %}
<div class="mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3><i class="bi bi-folder2-open"></i> 자료실</h3>
        <a href="/filesboard/write" class="btn btn-primary"><i class="bi bi-pencil"></i> 자료 등록</a>
    </div>

    <table class="table table-hover text-center shadow-sm">
        <thead class="table-info">
            <tr>
                <th style="width: 8%">번호</th>
                <th style="width: 50%">제목</th>
                <th style="width: 15%">작성자</th>
                <th style="width: 17%">등록일</th>
                <th style="width: 10%">조회</th>
            </tr>
        </thead>
        <tbody>
            {% for p in posts %}
            <tr>
                <td>{{ p.id }}</td>
                <td class="text-start ps-4">
                    <a href="/filesboard/view/{{ p.id }}" class="text-decoration-none text-dark fw-bold">
                        {{ p.title }}
                        {% if p.file_count > 0 %}
                            <i class="bi bi-paperclip text-primary ms-1"></i>
                        {% endif %}
                    </a>
                </td>
                <td>{{ p.writer_name }}</td>
                <td class="small text-muted">{{ p.created_at.strftime('%Y-%m-%d') if p.created_at }}</td>
                <td>{{ p.view_count }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" class="py-5 text-muted">등록된 자료가 없습니다.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}